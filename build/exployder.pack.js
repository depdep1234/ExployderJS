if(!window.console){window.console={};window.console.log=function(){}}(function(a,b,c){var d="Ex";var e="0.2.0";var f=function(){var c=null;var f=a[b];var g=a[d];var h=[d];var i=e;var j=function(){var d={getAliasNames:function(){for(var b=0;b<h.length;b++){if(a[h[b]]!=c){h.splice(b,1)}}return h},setAliasName:function(d){var e=false;if(!a[d]&&a[b]===c){a[d]=a[b];e=d;h.push(d)}return e},version:i,reserved:function(){var a=new Array;for(var b in d){a.push(String(b))}return a},createClass:function(a,b,d){if(c[a]){return false}if(typeof b!=="function"){return false}if(d===true){c[a]=function(){var a=null;return new function(){this.getInstance=function(){if(a===null){a=new b(arguments)}return a}}}()}else{c[a]=b}return true}};return d};return new function(){this.getInstance=function(){if(c===null){c=new j}return c}}}();if(!a[b]&&!a[d]){a[b]=f.getInstance();a[d]=a[b]}else{return false}})(this,"ExployderJS");(function(a,b){var c=a.navigator;var d=function(){var a;var d;var e;var f;var g={init:function(){if($('link[rel="index"]').size()!=0){g.setBasePath($('link[rel="index"]').attr("href").split("index.html")[0])}else{g.setBasePath($('script[src*="/util.js"]').attr("src").split("util.js")[0])}},getBaseURL:function(){return a},setBaseURL:function(b){a=b},getAccessURL:function(){return d},setAccessURL:function(a){d=a},setBasePath:function(a){e=a},getBasePath:function(){return e},isHashEmpty:function(a){for(var b in a){return false}return true},createGUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=Math.random()*16|0,c=a=="x"?b:b&3|8;return c.toString(16)}).toUpperCase()},getPosiOrNega:function(){var a=g.getRandom()-.5;if(a<0){a=-1}else{a=1}return a},setRandomTable:function(a){f.setRecord("table",a)},getRandom:function(){var a=this;var b;var c=f.getRecord("pointer");if(c===f.getRecord("length")){c=0}else{c=c+1}f.setRecord("pointer",c);b=f.getRecord("table")[c];return b},initRandomTable:function(a){var c=this;var d=$.Deferred();f=Ex.Model.getInstance().create({table:[],pointer:0,length:b});var e=[];var g;for(g=0;g<a;g++){e.push(Math.random());if(g===a-1){c.setRandomTable(e);f.setRecord("length",a);d.resolve()}}return d.promise()},shuffleArray:function(a){var b=a.length;var c=a.concat();while(b){var d=Math.floor(Math.random()*b);var e=c[--b];c[b]=c[d];c[d]=e}return c},disableContextMenu:function(a){$(a).bind("contextmenu",b);function b(){return false}},getBrowser:function(){var a=c.userAgent;var b={};if(a.match(/MSIE ([\.\d]+)/)){if(a.match(/Trident\/4\.0/)){b={type:1,name:"IE",version:"8.0",ua:a}}else{b={type:1,name:"IE",version:RegExp.$1,ua:a}}}else if(a.match(/Chrome\/([\.\d]+)/)){b={type:2,name:"chrome",version:RegExp.$1,ua:a}}else if(a.match(/Version\/([\.\d]+) Safari/)){b={type:3,name:"safari",version:RegExp.$1,ua:a}}else if(a.match(/Opera\/([\.\d]+)/)){b={type:4,name:"opera",version:RegExp.$1,ua:a}}else if(a.match(/Gecko/)){if(a.match(/(Firebird|Firefox)\/([\.\d]+)/)){b={type:5,name:String(RegExp.$1).toLowerCase(),version:RegExp.$2,ua:a};this.isFirefox=true}}else{b={type:6,name:"other",version:0,ua:a}}return b},getPlatform:function(){var a=c.userAgent;var b={};if(a.match(/iPhone/)){b={type:1,name:"iPhone",version:"",ua:a}}else if(a.match(/iPod/)){b={type:2,name:"iPod",version:"",ua:a}}else if(a.match(/Android/)){b={type:3,name:"Android",version:"",ua:a}}else if(a.match(/iPad/)){b={type:9,name:"iPad",version:"",ua:a}}else if(a.match(/Windows Phone OS/)){b={type:8,name:"windows phone",version:"7",ua:a}}else if(a.match(/Win(dows )?NT 6\.1/)){b={type:4,name:"windows",version:"7",ua:a}}else if(a.match(/Win(dows )?NT 6\.0/)){b={type:5,name:"windows",version:"vista",ua:a}}else if(a.match(/Win(dows )?(NT 5\.1|XP)/)){b={type:6,name:"windows",version:"xp",ua:a}}else{b={type:7,name:"other",version:0,ua:a}}return b}};g.init();return g};Ex.createClass("Util",d,true)})(this);(function(a,b){var c=function(){var a=[];var b={getAry:function(){return a},enqueue:function(a){b.getAry().push(a);return a},dequeue:function(){if(b.getAry().length>0){return b.getAry().shift()}return null},size:function(){return b.getAry().length},destroy:function(){var c=b.getAry().length;var d;for(d=0;d<c;d++){a[d]=null;a.shift()}}};return b};Ex.createClass("Queue",c)})(this);(function(a,b,c){var d=function(){var a={};var b={init:function(){},create:function(b,c){var d;c?d=c:0;var f=new e(b,d);a[f.id]=f;return f},find:function(b){return a[b]||0},destroy:function(b){a[b]=null;delete a[b]}};b.init();return b};Ex.createClass("Model",d,true);var e=function(a,d){var e=false;var f;var g=c;var h={};var i=function(a,d,e){if(b.cookie===c)return;j.deleteLocalData(a);b.cookie(a,h[a],{path:"/",expires:1e4})};var j={init:function(a,b){if(e==true)return;f=Ex.Util.getInstance().createGUID();h=a;if(b){g=String(b)}e=true},getID:function(){return String(f)},setRecord:function(a,c,d){if(!f)return;if(h[a]==c)return;h[a]=c;if(d===true){i(a,h[a],"Tue, 31-Dec-2030 23:59:59; ")}b(j).trigger(a+"_changed",j.getRecord(a,String(g)))},getRecord:function(a,b){if(!f)return;if(g!=c){if(g!==b){return c}}return h[a]},deleteLocalData:function(a){if(b.cookie===c)return;b.cookie(a,"",{path:"/",expires:-1})},checkLocalData:function(a){if(b.cookie===c)return;var d=b.cookie(a);if(d){return d}else{return false}},bind:function(a,c){b(j).bind(a,c)},unbind:function(a,c){b(j).unbind(a,c)},sync:function(a,c){if(!f)return;if(!c["url"])return;var d=c["type"]?c["type"]:0;var e=c["cache"]?c["cache"]:0;var g=c["data"]?c["data"]:0;b.ajax({type:d,cache:e,url:c["url"],data:g,success:function(b){var d=c["responseEdit"]?c["responseEdit"](b):b;j.setRecord(a,d)},error:function(a,b,d){c["errorCallback"]?c["errorCallback"](a,b,d):0}})},destroy:function(){if(!f)return}};j.init(a,d);return j}})(this,jQuery);(function(a,b){var c=function(a){var b;var c={init:function(){b=Ex.Model.getInstance().create({resource:{},count:0})},add:function(a,d){b.getRecord("resource")[d]=Ex.Model.getInstance().create({data:new Image,fileName:a,loaded:false});b.setRecord("count",Number(c.getCount())+1)},addImages:function(a){var b;if(a instanceof Array){b=a.length;for(var d=0;d<b;d++){c.add(a[d][0],a[d][1])}}},start:function(a){var d=$.Deferred();var e=0;var f="";if(a===false){f="?"+Ex.Util.getInstance().getRandom()}var g=b.getRecord("resource");for(var h in g){(function(a){if(g[a].getRecord("loaded")===true){e++;if(e>=c.getCount()){d.resolve()}}else{$(g[a].getRecord("data")).load(function(){g[a].setRecord("loaded",true);e++;if(e>=c.getCount()){d.resolve()}}).error(function(){d.reject()});g[a].getRecord("data").src=g[a].getRecord("fileName")+f}})(h)}return d.promise()},setCount:function(a){b.setRecord("count",a)},getCount:function(){return b.getRecord("count")},find:function(a){return b.getRecord("resource")[a]},getImages:function(){return b},getImg:function(a){return b.getRecord("resource")[a].getRecord("data")}};c.init(a);return c};Ex.createClass("ImageLoader",c)})(this);(function(a,b){var c=function(){var a;var c={init:function(){a=Ex.Model.getInstance().create({resource:{},count:0})},add:function(d,e){a.getRecord("resource")[e]=Ex.Model.getInstance().create({data:b,fileName:d,loaded:false});a.setRecord("count",Number(c.getCount())+1)},addHTMLFiles:function(a){var b;if(a instanceof Array){b=a.length;for(var d=0;d<b;d++){c.add(a[d][0],a[d][1])}}},start:function(b){var c=$.Deferred();var d=0;var e=[];var f=a.getRecord("resource");for(var g in f){(function(a){var c=$.ajax({url:f[a].getRecord("fileName"),cache:b});c.done(function(b){f[a].setRecord("data",b)}).fail(function(){});if(f[a].getRecord("loaded")===false){e.push(c)}})(g)}$.when.apply($,e).done(function(a){c.resolve()}).fail(function(){c.reject()});return c.promise()},setCount:function(b){a.setRecord("count",b)},getCount:function(){return a.getRecord("count")},find:function(b){return a.getRecord("resource")[b]},setHTMLDataById:function(b,c){a.getRecord("resource")[b].setRecord("data",c)},getHTMLDataById:function(b){return a.getRecord("resource")[b].getRecord("data")}};c.init();return c};Ex.createClass("HTMLLoader",c)})(this);(function(a,b,c){var d=function(){var a;var d;var e;var f={init:function(){e=Ex.Model.getInstance();a=new Ex.ImageLoader;d=new Ex.HTMLLoader},loadImages:function(c,d,e){var f=b.Deferred();a.addImages(c);a.start(d).done(function(){f.resolve()}).fail(function(){f.reject()});return f.promise()},getImageLoader:function(){return a},getHTMLLoader:function(){return d},loadHTMLFiles:function(a,c){var e=b.Deferred();d.addHTMLFiles(a);d.start(c).done(function(){e.resolve()}).fail(function(){e.reject()});return e.promise()},find:function(b,e){var f=c;switch(b){case"image":f=a.find(e);case"image_data":f=a.getImg(e);break;case"html":f=d.find(e);break;case"html_data":f=d.getHTMLDataById(e);break;default:break}return f}};f.init();return f};Ex.createClass("ResourceManager",d,true);Ex.ResourceManager.LOAD_SUCCESS="load_success";Ex.ResourceManager.LOAD_COMPLETE="load_complete";Ex.ResourceManager.LOAD_ERROR="load_error"})(this,jQuery);(function(a,b,c){var d=function(d){var f;var g;var h={};var i=function(){f=Ex.Model.getInstance();g=f.create({xmlData:c,sceneData:{},firstScene:c,current:c,destination:c,departure:c,peak:c,status:Ex.SceneManager.Status.SCENE_LOAD,defaultTitle:c,title:c,urlSync:false,logOutput:false,queue:new Ex.Queue,routingMethod:c,rootURL:c,useParam:c,urlParam:c});g.bind("current_changed",function(a,b){var d=b;if(u.getCurrent()===c){return}u.getCurrent().setStatus(u.getStatus())});g.bind("destination_changed",function(a,b){var d=b;if(u.getCurrent()!==c){g.setRecord("departure",u.getCurrent());g.setRecord("status",Ex.SceneManager.Status.SCENE_GOTO)}l(u.getDeparture(),u.getDestination())});g.bind("sceneData_changed",function(a,b){var c=b});g.bind("title_changed",function(a,b){var c=b;document.title=g.getRecord("title")+g.getRecord("defaultTitle")});g.bind("status_changed",function(a,c){var d=c;b(u).trigger(Ex.SceneManager.Event.STATUS_CHANGED,u.getStatus())});g.bind("queue_changed",function(a,b){var d=b;if(g.getRecord("queue")===c){return}n(g.getRecord("queue").dequeue())})};var j=function(a,b){var c=b;var d=g.getRecord("queue").getAry()[0];var e=g.getRecord("queue").getAry()[1];switch(u.getStatus()){case Ex.SceneManager.Status.SCENE_GOTO:if(c.hasChild(d)){g.setRecord("status",Ex.SceneManager.Status.SCENE_LOAD);n(g.getRecord("queue").dequeue())}else{g.setRecord("status",Ex.SceneManager.Status.SCENE_UNLOAD);n(c)};break;case Ex.SceneManager.Status.SCENE_LOAD:if(c===u.getDestination()){g.setRecord("status",Ex.SceneManager.Status.SCENE_INIT);n(c)}else{g.setRecord("status",Ex.SceneManager.Status.SCENE_LOAD);n(g.getRecord("queue").dequeue())};break;case Ex.SceneManager.Status.SCENE_UNLOAD:if(c===u.getDestination()){g.setRecord("status",Ex.SceneManager.Status.SCENE_LOAD);n(c)}else if(d.hasParent(e)){g.setRecord("status",Ex.SceneManager.Status.SCENE_UNLOAD);n(g.getRecord("queue").dequeue())}else if(d.hasChild(e)){g.setRecord("status",Ex.SceneManager.Status.SCENE_LOAD);g.getRecord("queue").dequeue();n(g.getRecord("queue").dequeue())}else if(d===u.getDestination()){g.setRecord("status",Ex.SceneManager.Status.SCENE_UNLOAD);n(g.getRecord("queue").dequeue())};break;case Ex.SceneManager.Status.SCENE_INIT:g.setRecord("status",Ex.SceneManager.Status.SCENE_INIT_COMPLETE);g.setRecord("title",c.getTitle());break;case Ex.SceneManager.Status.SCENE_OFF:break}return};var k=function(a,b){var d="";var e=a.split("/");var f=b.split("/");if(a===b){return c}var g=Math.min(e.length,f.length);var h;for(h=0;h<g;h++){if(e[h]!=f[h]){break}h!==0?d+="/":0;d+=e[h]}return d};var l=function(a,b){var d=g.getRecord("queue");m();if(a===c){a=g.getRecord("firstScene")}var e=a.getSceneID().getPath();var f=b.getSceneID().getPath();var h=k(e,f);if(h!==c){var i=e.split("/");var j=i.length;var l=h.split("/");var n=l.length;var o=f.split("/");var p=o.length;var q;var r;if(j>n){r=e;for(q=j-1;q>=n;q--){d.enqueue(u.find(r));r=r.split(i[q])[0];r=r.replace(/\/$/,"")}}r=h;d.enqueue(u.find(r));for(q=n;q<p;q++){r+="/"+o[q];r=r.replace(/\/$/,"");d.enqueue(u.find(r))}g.setRecord("queue",c);g.setRecord("queue",d);g.setRecord("peak",u.find(h))}else if(h===c&&u.getDestination()===g.getRecord("firstScene")){d.enqueue(u.find(e));g.setRecord("queue",c);g.setRecord("queue",d)}};var m=function(){g.getRecord("queue").destroy()};var n=function(a){g.setRecord("current",c);g.setRecord("current",a)};var o=function(a){var b,d,e,f,g;d=a["constructor"];e=a["includes"];f=a["child"];if(a["sceneObject"]===null){if(d.getInstance===c){a["sceneObject"]=new d([e])}else{a["sceneObject"]=d.getInstance(e)}a["sceneObject"].bind("complete",j);if(a["sceneObject"].getParent()!=c){a["sceneObject"].getParent().addScene(a["sceneObject"])}h[a["sceneObject"].getName()]=a["sceneObject"]}if(!Ex.Util.getInstance().isHashEmpty(f)){for(g in f){o(f[g])}}};var p=function(a){if(u.locked===true){return}if(g.getRecord("firstScene")===c){return}if(u.getDeparture()!==c&&u.getStatus()!==Ex.SceneManager.Status.SCENE_INIT_COMPLETE){return}var b;if(typeof a==="string"){b=u.find(String(a))}else{b=a}if(u.getDeparture()!==c&&b===g.getRecord("firstScene")){return}if(b!==c){g.setRecord("destination",b)}};var q=function(a){if(u.locked===true){return}if(g.getRecord("firstScene")===c){return}if(u.getDeparture()!==c&&u.getStatus()!==Ex.SceneManager.Status.SCENE_INIT_COMPLETE){return}var b;if(typeof a==="string"){b=u.find(String(a))}else{b=a}if(u.getDeparture()!==c&&b===g.getRecord("firstScene")){return}if(b===u.getCurrent()){return}var d;var e;var f;var h;if(b===c){return}h=b.getNameExt();if(b===u.getFirstScene()){f=null;d=null}else{f=b.getName();if(u.getURLSync()!==false&&b.getUrlSync()!==false){if(u.getUseParam()===true){e="?p=";d=u.getRootURL()+e+b.getPath().replace(/intro\/(index|global|page_thumbnail)/,"").replace(/^\//,"");if(f!=="index"&&h===c){d=d+"/"}else if(f==="index"&&h!==c){d=d+"index"+h}else if(h!==c){d=d+h}}else{var i=u.getURLParam();if(i===c){i=""}e=i;d=u.getRootURL()+b.getPath().replace(/intro\/(index|global|page_thumbnail)/,"").replace(/^\//,"");if(f!=="index"&&h===c){d=d+"/"}else if(f==="index"&&h!==c){d=d+"index"+h}else if(h!==c){d=d+h}d=d+e}}else{d=null}}history.pushState(f,b.getTitle(),d);r(b.getName())};var r=function(a){p(h[a])};var s=function(a){if(u.locked===true){return}if(g.getRecord("firstScene")===c){return}if(u.getDeparture()!==c&&u.getStatus()!==Ex.SceneManager.Status.SCENE_INIT_COMPLETE){return}var b;if(typeof a==="string"){b=u.find(String(a))}else{b=a}if(u.getDeparture()!==c&&b===g.getRecord("firstScene")){return}if(b!==c){location.hash=b.getName()}};var t=function(a){p(h[a])};var u={setup:function(a){var b=u.getSceneData();var c;for(c in b){o(b[c])}g.setRecord("firstScene",u.find(String(a)))},getSceneData:function(){return g.getRecord("sceneData")},getCurrent:function(){return g.getRecord("current")},getStatus:function(){return g.getRecord("status")},create:function(a,b,d){if(a===c){return}if(b===c){return}var f=e(a);var g;if(d==true){g=true}else{g=false}Ex.createClass(b,f,g)},registerScenesFromXML:function(d){g.setRecord("xmlData",d);var e=b(d).find("scene");e.each(function(){var d=b(this);var e=d.attr("name");var f=d.attr("name-ext");var h=d.attr("title");var i=d.attr("data-ex-scene");var j=function(){var a=d.find("> description");if(a.size()!==0){return a.text()}else{return c}}();var k=d.attr("skip");var l=d.attr("data-ex-notrack");var m=d.attr("url-sync")&&d.attr("url-sync")==="false"?false:true;var i=d.attr("data-ex-scene");var n=b.parseXML("<data></data>");var o=d.children(":not(scene)").clone();if(o.length!==0){b(n).find("data").append(o)}var p=function(){var b=i.split(".").length;var c;var d=a;for(c=0;c<b;c++){d=d[i.split(".")[c]]}return d}();var q=d.find("> scene");var r=e;d.parents("scene").each(function(){r=b(this).attr("name")+"/"+r});var s=u.getSceneData();var t=r.split("/");var v=t.length;var w=0;var x=s[t[w]];if(s[t[w]]===c){s[t[w]]={sceneObject:null,constructor:c,includes:c,child:{}};x=s[t[w]]}for(w=1;w<v;w++){if(x["child"][t[w]]===c){x["child"][t[w]]={sceneObject:null,constructor:c,includes:c,child:{}}}x=x["child"][t[w]]}x.constructor=p;x.includes={title:h,path:r,nameExt:f,description:j,className:i,skipPath:k,isNoTrack:l,urlSync:m,xmlData:b(n).find("data")};g.setRecord("sceneData",s)})},removeScene:function(){},getXmlData:function(){return g.getRecord("xmlData")},setRootURL:function(a){g.setRecord("rootURL",a)},getRootURL:function(){return g.getRecord("rootURL")},setDefaultTitle:function(a){g.setRecord("defaultTitle",a)},getDefaultTitle:function(){return g.getRecord("defaultTitle")},canPushState:function(){if(a.history&&a.history.pushState){return true}else{return false}},getRoutingMethod:function(){return g.getRecord("routingMethod")},setRoutingMethod:function(d){if(g.getRecord("routingMethod")!==c){return}if(d==="hashchange"){if(b(a).hashchange){g.setRecord("routingMethod","hashchange");b(a).hashchange(function(){t(location.hash.replace(/#/,""))})}else{g.setRecord("routingMethod","none")}}else if(d==="pushState"){if(u.canPushState()===true){g.setRecord("routingMethod","pushState");a.addEventListener("popstate",function(a){if(a.state===null){return}r(a.state)},false)}else if(b(a).hashchange){g.setRecord("routingMethod","hashchange");b(a).hashchange(function(){t(location.hash.replace(/#/,""))})}else{g.setRecord("routingMethod","none")}}else{g.setRecord("routingMethod","none")}},setRouting:function(a){a.rootURL?u.setRootURL(a.rootURL):0;a.method?u.setRoutingMethod(a.method):0;a.urlSync?u.setURLSync(a.urlSync):0;a.useParam?u.setUseParam(a.useParam):0},setURLSync:function(a){g.setRecord("urlSync",a)},getURLSync:function(){return g.getRecord("urlSync")},setUseParam:function(a){g.setRecord("useParam",a)},getUseParam:function(){return g.getRecord("useParam")},setURLParam:function(a){g.setRecord("urlParam",a)},getURLParam:function(){return g.getRecord("urlParam")},setLogOutput:function(a){g.setRecord("logOutput",a)},getLogOutput:function(){return g.getRecord("logOutput")},getHashList:function(){return h},"goto":function(a){var b=u.getRoutingMethod();switch(b){case"hashchange":s(a);break;case"pushState":q(a);break;case"none":p(a);break;default:p(a);break}},gotoFirstScene:function(){var a=u.getFirstScene().getPath()+"/index";var b=location.href.replace(u.getRootURL(),"");if(u.getRoutingMethod()==="hashchange"){b=b.replace(/(.*)#(.*)$/,"$2")}else if(u.getRoutingMethod()==="pushState"){b=b.replace(/(.*)#(.*)$/,"$1");b=b.replace(/(.*)\.(.*)$/,"$1");b=b.replace(/\/index$/,"");if(u.getUseParam()===true){b=b.replace(/\?p=(.*)$/,"$1")}}else{u.nextScenePath=g.getRecord("firstScene").getChildren()[0].getPath();u.goto(g.getRecord("firstScene"));return}if(b===""||b==="index"){b=a}else{b=a+"/"+b}if(u.getUseParam()!==true){u.nextScenePath=b.replace(/\?(.*)$/,"").replace(/\/$/,"")}else{u.nextScenePath=b.replace(/\/$/,"")}u.goto(g.getRecord("firstScene"))},stop:function(){},rejume:function(){},getFirstScene:function(){return g.getRecord("firstScene")},getDestination:function(){return g.getRecord("destination")},getDeparture:function(){return g.getRecord("departure")},bind:function(a,c){b(u).bind(a,c)},unbind:function(a,c){b(u).unbind(a,c)},find:function(a){if(a===c){return c}var b=u.getSceneData();var d=a.split("/");var e=d.length;var f=b[d[0]];var g=c;var h=true;for(var i=1;i<e;i++){if(f!==c&&f["child"]!==c){f=f["child"][d[i]]}else{h=false}}h&&f!==c?g=f.sceneObject:0;return g}};i();return u};Ex.createClass("SceneManager",d,true);Ex.SceneManager.Event={CURRENT_SCENE_CHANGED:"current_scene_changed",STATUS_CHANGED:"status_changed"};Ex.SceneManager.Status={SCENE_LOAD:"scene_load",SCENE_INIT:"scene_init",SCENE_INIT_COMPLETE:"scene_init_complete",SCENE_GOTO:"scene_goto",SCENE_UNLOAD:"scene_unload",SCENE_OFF:"scene_off"};var e=function(a){return function(d){var e;var g;var h;var i;var j=[];var k;var l;var m=function(a){if(n.getManager().getLogOutput()===true){console.log(n.getName()+" "+n.getStatus())}if(a&&typeof a==="function"){a.apply(n)}else{n.done()}};var n={init:function(b){if(!b&&!b["path"]){return}e=new f(b["path"]);g=e.getName();h=b["skipPath"];i=n.getManager().find(e.getParentPath());l=Ex.Model.getInstance().create({title:b["title"]?b["title"]:c,status:c,class_name:b["className"]?b["className"]:c,is_no_track:b["isNoTrack"]?true:false,url_sync:b["urlSync"]?true:false,nameExt:b["nameExt"]?b["nameExt"]:c,description:b["description"]?b["description"]:c});if(!a){return}l.bind("status_changed",function(b,c){var d=c;switch(n.getStatus()){case Ex.SceneManager.Status.SCENE_LOAD:n.sceneLoad(a["sceneLoad"]);break;case Ex.SceneManager.Status.SCENE_INIT:n.sceneInit(a["sceneInit"]);break;case Ex.SceneManager.Status.SCENE_INIT_COMPLETE:break;case Ex.SceneManager.Status.SCENE_GOTO:n.sceneGoto(a["sceneGoto"]);break;case Ex.SceneManager.Status.SCENE_UNLOAD:n.sceneUnload(a["sceneUnload"]);break;default:break}});b&&b["xmlData"]?k=b["xmlData"]:0;a&&a["init"]?a["init"].apply(n):0},getSceneID:function(){return b.extend(true,{},e)},getPath:function(){return n.getSceneID().getPath()},getName:function(){return String(g)},getNameExt:function(){return l.getRecord("nameExt")},getTitle:function(){return l.getRecord("title")},getDescription:function(){return l.getRecord("description")},getSkipPath:function(){return h},getClassName:function(){return l.getRecord("class_name")},getUrlSync:function(){return l.getRecord("url_sync")},getXmlData:function(){return k},getParent:function(){i===c?i=n.getManager().find(e.getParentPath()):0;return i},hasParent:function(a){var b=false;a===i?b=true:0;return b},isParentOf:function(a){var b=false;a.hasParent(n)?b=true:0;return b},getChildren:function(){return j},getPrev:function(){var a=c;var b=n.getParent();var d=b.getChildren();var e=d.length;var f;for(f=0;f<e;f++){if(d[f]===n){if(f!==0){a=d[f-1]}}}return a},getNext:function(){var a=c;var b=n.getParent();var d=b.getChildren();var e=d.length;var f;for(f=0;f<e;f++){if(d[f]===n){if(f!==e-1){a=d[f+1]}}}return a},hasChild:function(a){var b=false;var c;var d=j.length;for(c=0;c<d;c++){a===j[c]?b=true:0}return b},isChildOf:function(a){var b=false;var c;var d=j.length;for(c=0;c<d;c++){a.hasChild(n)?b=true:0}return b},addScene:function(a){j.push(a)},getManager:function(){return Ex.SceneManager.getInstance()},setStatus:function(a){if(a===Ex.SceneManager.Status.SCENE_OFF||a===Ex.SceneManager.Status.SCENE_LOAD||a===Ex.SceneManager.Status.SCENE_INIT||a===Ex.SceneManager.Status.SCENE_GOTO||a===Ex.SceneManager.Status.SCENE_UNLOAD||a===Ex.SceneManager.Status.SCENE_INIT_COMPLETE){l.setRecord("status",a)}},getStatus:function(){return l.getRecord("status")},bind:function(a,c){b(n).bind(a,c)},unbind:function(a,c){b(n).unbind(a,c)},trigger:function(a,c){b(n).trigger(a,c)},sceneOff:function(a){m(a)},sceneLoad:function(a){m(a)},sceneInit:function(a){m(a)},sceneGoto:function(a){m(a)},sceneUnload:function(a){m(a)},done:function(){n.trigger("complete",n)},isNoTrack:function(){return l.getRecord("is_no_track")}};n.init.apply(n,d);return n}};var f=function(a){var b;var c;var d="";var e;var g;var h=0;var i=function(){c=a;e=c.split("/");g=e.length;b=e[g-1];if(g>1){for(h=0;h<g-1;h++){d+=e[h];h!=g-2?d+="/":0}}};var j={getName:function(){return String(b)},getParentPath:function(){return String(d)},getPath:function(){return String(c)}};i();f.prototype=j;return j}})(this,jQuery);(function(a,b,c){var d=function(){var d={};var h;var i=function(){h=Ex.Model.getInstance().create({windowSize:{width:b(a).width(),height:b(a).height()}});b(a).bind("resize",function(){h.setRecord("windowSize",{width:b(a).width(),height:b(a).height()})})};var j={create:function(a,b,c,d){var h;switch(b){case"dom":h=e(a);break;case"canvas":h=f(a);break;case"canvasDisplayObject":h=g(a);break;default:break}var i;if(d==true){i=true}else{i=false}Ex.createClass(c,h,i)},getWindowSize:function(){return h.getRecord("windowSize")},addList:function(a){d[a.getId()]=a},find:function(a){var b;for(var e in d){if(d[e].getElement()!==c&&d[e].getElement().get(0)===a.get(0)){b=e;break}}if(b===c){return c}return d[b]},destroy:function(a){var b;for(var e in d){if(d[e].getElement()!==c&&d[e].getElement().get(0)===a.get(0)){b=e;break}}if(b===c){return}d[b].removeAllEventListener();d[b]=null;delete d[b]}};i();return j};Ex.createClass("Controller",d,true);var e=function(d){return function(){var e;var f;var g={};var h={init:function(){},getId:function(){return String(e)},setElement:function(a){f=b(a)},getElement:function(){return f},util:c,manager:c,include:function(a){if(typeof a==="function"){a=h.proxy(a,h)}b.extend(h,a)},$:function(a){return b(a,h.getElement())},anim:c,fixedWidth:c,fixedHeight:c,fixedTop:c,fixedLeft:c,fixedRight:c,fixedBottom:c,fixedOpacity:c,timer:c,addChild:function(a,c){var d=b.Deferred();if(b.contains(h.getElement().get(0),a.getElement().get(0))===true){d.resolve();return d.promise()}if(h.getElement().find(c).size()!==0){b(c,h.getElement()).append(a.getElement())}else{h.getElement().append(a.getElement())}h.removeAllEventListener();h.addAllEventListener();Ex.Linkage.getInstance().bindController(b(a.getElement()));a.onAdded().then(function(){d.resolve()},function(){d.resolve()});return d.promise()},onAdded:function(){var a=b.Deferred();a.resolve();return a.promise()},removeChild:function(a){var c=b.Deferred();if(b.contains(h.getElement().get(0),a.getElement().get(0))===false){c.resolve();return c.promise()}a.removeAllEventListener();a.onRemoved().then(function(){Ex.Linkage.getInstance().unbindController(b(a.getElement()));a.getElement().detach();c.resolve()},function(){Ex.Linkage.getInstance().unbindController(b(a.getElement()));a.getElement().detach();c.resolve()});return c.promise()},onRemoved:function(){var a=b.Deferred();a.resolve();return a.promise()},wait:function(a){var c=b.Deferred();h.timer=setTimeout(function(){c.resolve()},a);return c.promise()},clearWait:function(){clearTimeout(h.timer)},proxy:function(a,c){return b.proxy(a,c)},removeAllEventListener:function(){if(h.windowResize!==c){b(a).off("resize",g["window_resize"])}if(h.events!==c){for(var d in h.events){h.getElement().off(d,g[d])}}if(h.hammer!==c){for(var d in h.hammer){h.getElement().hammer().off(d,g[d])}}},addAllEventListener:function(){if(h.windowResize!==c){g["window_resize"]=h.proxy(h.windowResize,h);b(a).on("resize",g["window_resize"])}if(h.events!==c){for(var d in h.events){g[d]=h.proxy(h.events[d],h);h.getElement().on(d,g[d])}}if(h.hammer!==c){for(var d in h.hammer){g[d]=h.proxy(h.hammer[d][1],h);h.getElement().hammer(h.hammer[d][0]).on(d,g[d])}}if(h.touchSwipe!==c){for(var e in h.touchSwipe){if(typeof h.touchSwipe[e]==="function"){h.touchSwipe[e]=h.proxy(h.touchSwipe[e],h)}}g["touchSwipe"]=h.touchSwipe;h.getElement().swipe(g["touchSwipe"])}}};e=Ex.Util.getInstance().createGUID();if(d){for(var i in d){if(i==="id"||i==="element"||i==="include"||i==="$"||i==="proxy"||i==="removeAllEventListener"||i==="addChild"||i==="removeChild"||i==="promise"||i==="done"||i==="reject"){delete d[i]}}h.include(d)}h.init.apply(h,arguments);Ex.Controller.getInstance().addList(h);return h}};var f=function(d){return function(){var e;var f;var g=30;var h=1200;var i=761;var j="100%";var k="100%";var l;var m;var n;var o={};var p=function(){var a=Ex.Controller.getInstance().getWindowSize().width;var b=Ex.Controller.getInstance().getWindowSize().height;if(r.getMinWidth()===r.getMaxWidth()){m=r.getMinWidth()}else if(r.getMinWidth()>=a){m=r.getMinWidth()}else if(a<=r.getMaxWidth()){m=a}else{m=r.getMaxWidth()}if(r.getMinHeight()===r.getMaxHeight()){n=r.getMinHeight()}else if(r.getMinHeight()>=b){n=r.getMinHeight()}else if(b<=r.getMaxHeight()){n=b}else{n=r.getMaxHeight()}r.getElement().attr("width",m);r.getElement().attr("height",n);r.trigger("canvas_resize")};var q=function(){};var r={init:function(){},getId:function(){return String(e)},setId:function(a){e=a},setElement:function(a){f=b(a)},getElement:function(){return f},getStage:function(){return l},util:c,manager:c,getWidth:function(){return m},getHeight:function(){return n},setMinWidth:function(a){h=a},getMinWidth:function(){return h},setMinHeight:function(a){i=a},getMinHeight:function(){return i},setMaxWidth:function(a){j=a},getMaxWidth:function(){if(j==="100%"){return Ex.Controller.getInstance().getWindowSize().width}return j},setMaxHeight:function(a){k=a},getMaxHeight:function(){if(k==="100%"){return Ex.Controller.getInstance().getWindowSize().height}return k},include:function(a){if(typeof a==="function"){a=r.proxy(a,r)}b.extend(r,a)},$:function(a){return b(a,r.getElement())},proxy:function(a,c){return b.proxy(a,c)},start:function(){},stop:function(){createjs.Ticker.removeListener(q)},onAdded:function(){var a=b.Deferred();r.removeAllEventListener();r.addAllEventListener();a.resolve();return a.promise()},onRemoved:function(){var a=b.Deferred();r.removeAllEventListener();a.resolve();return a.promise()},wait:function(a){var c=b.Deferred();setTimeout(function(){c.resolve()},a);return c.promise()},bind:function(a,c){b(r).on(a,c)},unbind:function(a,c){b(r).off(a,c)},trigger:function(a,c){b(r).trigger(a,c)},removeAllEventListener:function(){if(r.canvasResize!=c){b(r).off("canvas_resize",o["canvas_resize"])}b(a).off("resize",p);if(r.windowResize!=c){b(a).off("resize",o["window_resize"])}if(r.events!=c){for(var d in r.events){r.getElement().off(d,o[d])}}},addAllEventListener:function(){if(r.canvasResize!==c){o["canvas_resize"]=r.proxy(r.canvasResize,r);b(r).on("canvas_resize",o["canvas_resize"])}b(a).on("resize",p);if(r.windowResize!=c){o["window_resize"]=r.proxy(r.windowResize,r);b(a).on("resize",o["window_resize"])}if(r.events!==c){for(var d in r.events){o[d]=r.proxy(r.events[d],r);r.getElement().on(d,o[d])}}}};e=Ex.Util.getInstance().createGUID();if(d){for(var s in d){if(s==="element"){r.setElement(d[s]);l=new createjs.Stage(r.getElement().get(0));delete d[s]}else if(s==="minWidth"){r.setMinWidth(d[s]);delete d[s]}else if(s==="minHeight"){r.setMinHeight(d[s]);delete d[s]}else if(s==="maxWidth"){r.setMaxWidth(d[s]);delete d[s]}else if(s==="maxHeight"){r.setMaxHeight(d[s]);delete d[s]}else if(s==="id"||s==="width"||s==="height"||s==="element"||s==="stage"||s==="include"||s==="$"||s==="proxy"||s==="removeAllEventListener"){delete d[s]}}r.include(d)}r.util=Ex.Util.getInstance();r.manager=Ex.SceneManager.getInstance();r.init.apply(r,arguments);p();Ex.Controller.getInstance().addList(r);return r}};var g=function(a){return function(){var d;var e;var f;var g;var h={init:function(){},getId:function(){return String(d)},setId:function(a){d=a},setDisplayObject:function(a){e=a},getDisplayObject:function(){return e},getCanvas:function(){return f},util:c,manager:c,setPosition:function(a,b){e.x=a;e.y=b},setScale:function(a,b){e.scaleX=a;e.scaleY=b},setFixedPosition:function(a){g={x:a[0],y:a[1]}},getFixedPosition:function(){return g},wait:function(a){var c=b.Deferred();setTimeout(function(){c.resolve()},a);return c.promise()},bind:function(a,c){b(h).on(a,c)},unbind:function(a,c){b(h).off(a,c)},trigger:function(a,c){b(h).trigger(a,c)},include:function(a){if(typeof a==="function"){a=h.proxy(a,h)}b.extend(h,a)},proxy:function(a,c){return b.proxy(a,c)}};d=Ex.Util.getInstance().createGUID();if(a){for(var i in a){if(i==="id"||i==="displayObject"||i==="fixedPosition"||i==="include"||i==="canvas"||i==="setPosition"||i==="proxy"||i==="removeAllEventListener"){delete a[i]}}h.include(a)}h.util=Ex.Util.getInstance();h.manager=Ex.SceneManager.getInstance();h.init.apply(h,arguments);if(h.events!=c){for(var j in h.events){switch(String(j)){case"click":h.getDisplayObject().addEventListener("click",h.proxy(h.events[j],h));break;case"mouseover":h.getDisplayObject().addEventListener("mouseover",h.proxy(h.events[j],h));break;case"mouseout":h.getDisplayObject().addEventListener("mouseout",h.proxy(h.events[j],h));break;case"update":h.getDisplayObject().addEventListener("tick",h.proxy(h.events[j],h));break}}}return h}}})(this,jQuery);(function(a,b,c){var d=function(){var d=function(){};var e={bindController:function(d,f){var g=b("[data-ex-controller]",d);var h=g.size();if(d.attr("data-ex-controller")!==c){g.add(d)}g.each(function(d){
if(Ex.Controller.getInstance().find(b(this))!==c){return}var g=b(this).attr("data-ex-controller");var i=g.split(".").length;var j;var k=a;for(j=0;j<i;j++){k=k[g.split(".")[j]]}if(k!==c&&k.getInstance===c){new k(b(this)).addAllEventListener()}else if(k!==c&&k.getInstance!==c){k.getInstance(b(this));k.getInstance(b(this)).addAllEventListener()}if(d===h-1){b(e).trigger(f+"_linkage_complete")}})},unbindController:function(a){var d=b("[data-ex-controller]",a);if(a.attr("data-ex-controller")!==c){d.add(a)}d.each(function(){if(Ex.Controller.getInstance().find(b(this))===c){return}Ex.Controller.getInstance().destroy(b(this))})},bind:function(a,c){b(e).bind(a,c)},unbind:function(a,c){b(e).unbind(a,c)}};d();return e};Ex.createClass("Linkage",d,true)})(this,jQuery);(function(a,b,c){var d=function(){var a=function(){};var c={add:function(a){b(c).bind("change",function(b,c){if(a===c){a.activate()}else{a.deactivate()}});a.active=function(){b(c).trigger("change",a)}}};a();return c};Ex.createClass("StateMachine",d)})(this,jQuery);(function(a,b,c){Ex.Controller.getInstance().create({scenePath:c,canceled:false,alternateURL:c,init:function(a){var b=this;b.setElement(a);b.element=b.getElement();b.scenePath=b.element.attr("data-ex-scene-path");if(b.scenePath===""||b.scenePath===c){b.element.css({display:"none"})}var d=b.element.attr("data-ex-cancel-device");var e=Ex.DeviceManager.getInstance().device;if(d!=c&&d!==null&&d.match(e)){b.canceled=true}if(Ex.DeviceManager.getInstance().device!=="pc"){b.getElement().swipe({excludedElements:"",tap:function(a,c){if(b.canceled){b.alternateURL=Ex.SceneManager.getInstance().find(b.scenePath).alternateURL;b.element.attr("href",b.alternateURL)}else{b.scenePath=b.getElement().attr("data-ex-scene-path");Ex.SceneManager.getInstance().goto(b.scenePath)}}})}},setScenePath:function(a){var b=this;b.element.attr("data-ex-scene-path",a);b.scenePath=b.element.attr("data-ex-scene-path");if(a!==c&&a!==""){b.element.css({display:"block"})}else{b.element.css({display:"none"})}},events:{click:function(a){if(Ex.DeviceManager.getInstance().device!=="pc"){return false}a.stopPropagation();var b=this;if(b.canceled){b.alternateURL=Ex.SceneManager.getInstance().find(b.scenePath).alternateURL;b.element.attr("href",b.alternateURL)}else{b.scenePath=b.getElement().attr("data-ex-scene-path");Ex.SceneManager.getInstance().goto(b.scenePath)}return false}}},"dom","SceneButton")})(this,jQuery);